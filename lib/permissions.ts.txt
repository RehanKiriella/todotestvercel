// lib/permissions.ts

// Define the roles and statuses as specified in the requirements [cite: 13, 15]
export type Role = 'User' | 'Manager' | 'Admin';
export type Status = 'draft' | 'in_progress' | 'completed';

export interface Todo {
  id: string;
  title: string;
  description: string;
  status: Status;
  userId: string;
}

// 2.2. User Roles and Permissions logic [cite: 14, 16]
export const canViewTodo = (userRole: Role, userId: string, todo: Todo) => {
  if (userRole === 'Admin' || userRole === 'Manager') return true; // Managers/Admins see all 
  return todo.userId === userId; // Users only see their own 
};

export const canDeleteTodo = (userRole: Role, userId: string, todo: Todo) => {
  if (userRole === 'Admin') return true; // Admins delete any status 
  if (userRole === 'User' && todo.userId === userId && todo.status === 'draft') {
    return true; // Users only delete their own in draft 
  }
  return false; // Managers and other conditions are blocked 
};